%{
#include <stdio.h>
#include <stdlib.h>
%}

%token NUM
%left '+' '-'
%left '*' '/'

%%
input : input expr '\n'   { printf("Result = %d\n", $2); }
      | /* empty */
      ;

expr  : expr '+' expr     { $$ = $1 + $3; }
      | expr '-' expr     { $$ = $1 - $3; }
      | expr '*' expr     { $$ = $1 * $3; }
      | expr '/' expr     { 
                              if ($3 == 0)
                              {
                                  printf("Division by zero error\n");
                                  exit(0);
                              }
                              $$ = $1 / $3;
                            }
      | '(' expr ')'      { $$ = $2; }
      | NUM               { $$ = $1; }
      ;
%%
int yyerror(char *s)
{
    printf("Invalid expression\n");
    return 0;
}

int main()
{
    printf("Enter arithmetic expression:\n");
    yyparse();
    return 0;
}
